# JavaScript.Info

> æ–‡æ¡£åœ°å€ï¼š[ä¼ é€é—¨](https://javascript.info/)

é˜…è¯»æç¤ºï¼š âš ï¸ æ³¨æ„äº‹é¡¹ ğŸ¤¯ ä¸ªäººæ€è€ƒ ğŸŒŸ é‡è¦å†…å®¹  ğŸŒšå¥‡å·§æ·«æŠ€

## `Part1`  The JavaScript language

### ç®€ä»‹

#### å†å²

[javaScript å†å² ä¼ é€é—¨](https://github.com/NorthwesternDirector/myGitBook/blob/master/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/Javascript/JavaScript%2020%E5%B9%B4.md)

#### JavaScript å¼•æ“

> JavaScript ä¸ä»…å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œï¼Œè€Œä¸”å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼ˆå®é™…ä¸Šå¯ä»¥åœ¨ä»»ä½•å…·æœ‰ [JavaScriptå¼•æ“](https://en.wikipedia.org/wiki/JavaScript_engine) çš„è®¾å¤‡ä¸Šæ‰§è¡Œï¼‰

| æµè§ˆå™¨å¼•æ“ ğŸ‘‰ğŸ»  |  V8  | SpiderMonkeyğŸŒŸ | Chakra | ChakraCore | Nitro/SquirrelFish |      æµè§ˆå™¨å†…æ ¸       |
| :------------: | :--: | :-----------: | :----: | :--------: | :----------------: | :-------------------: |
|     Chrome     |  âœ…   |               |        |            |                    |     Webkit->Blink     |
|     Opera      |  âœ…   |               |        |            |                    | Presto->Webkit->Blink |
|    Firefox     |      |       âœ…       |        |            |                    |         Gecko         |
|       IE       |      |               |   âœ…    |            |                    |        Trident        |
| Microsoft Edge |      |               |        |     âœ…      |                    |       EdgeHTML        |
|     Safari     |      |               |        |            |         âœ…          |        Webkit         |

âš ï¸ï¼šæµè§ˆå™¨å†…æ ¸åˆå§‹åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ¸²æŸ“å¼•æ“ (LayoutEngineer/RenderingEngine) å’Œ JavaScript å¼•æ“ï¼›ä½†è¿‘äº›å¹´ä¹ æƒ¯ç›´æ¥ç§°æ¸²æŸ“å¼•æ“ä¸ºå†…æ ¸ï¼Œ JavaScript å¼•æ“ç‹¬ç«‹ã€‚***æ¸²æŸ“å¼•æ“*** ä¸»è¦åŠŸèƒ½æ˜¯è§£æ HTML/CSS è¿›è¡Œæ¸²æŸ“é¡µé¢ï¼Œæ¸²æŸ“å¼•æ“å†³å®šäº†æµè§ˆå™¨å¦‚ä½•æ˜¾ç¤ºç½‘é¡µçš„å†…å®¹ä»¥åŠé¡µé¢çš„æ ¼å¼ä¿¡æ¯ï¼›***JavaScript å¼•æ“*** ä¸“é—¨å¤„ç† JavaScript è„šæœ¬çš„è™šæ‹Ÿæœºã€è§£é‡Šå™¨ï¼Œç”¨æ¥è§£é‡Šæ‰§è¡Œjsä»£ç 

**ç®€ç‰ˆå¼•æ“å·¥ä½œæµç¨‹**

1. å¼•æ“è¯»å–ï¼ˆè§£æï¼‰è„šæœ¬
2. å°†è„šæœ¬è½¬æ¢ï¼ˆç¼–è¯‘ï¼‰ä¸ºæœºå™¨è¯­è¨€
3. è¿è¡Œæœºå™¨ä»£ç ï¼Œéå¸¸å¿« ğŸ˜Œ

### åŸºç¡€

#### è¿ç®—ç¬¦&ç®—æ•°

##### `+` 

> +çš„éšå¼è½¬æ¢ï¼š ğŸŒŸ äºŒå…ƒè¿ç®—ç¬¦ `+` æ˜¯ ***å”¯ä¸€ä¸€ä¸ª*** ä»¥ â€œå¦‚æœä»»ä½•ä¸€ä¸ªæ“ä½œæ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå¦ä¸€ä¸ªä¹Ÿå°†è½¬æ¢ä¸ºå­—ç¬¦ä¸²â€  çš„æ–¹å¼è¿›è¡Œæ“ä½œçš„è¿ç®—ç¬¦ï¼›å…¶ä»–ç®—æœ¯è¿ç®—ç¬¦åªå¯¹æ•°å­—å·¥ä½œï¼Œå¹¶ä¸” ***æ€»æ˜¯å°†å…¶æ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—***

```js
alert( '1' + 2 ); // "12"
alert( 2 + '1' ); // "21"
alert( 2 + 2 + '1' ); // "41" 
alert( 6 - '2' ); // 4, converts '2' to a number
alert( '6' / '2' ); // 3, converts both operands to numbers
```

ğŸŒšï¼šå½“ `+` ä½œä¸ºä¸€å…ƒè¿ç®—ç¬¦ä½¿ç”¨æ—¶å®ƒå¯¹æ•°å­—ä¸èµ·ä»»ä½•ä½œç”¨ï¼Œä½†å¦‚æœæ“ä½œæ•°ä¸æ˜¯æ•°å­—ï¼Œä¸€å…ƒåŠ å·ä¼šå°†å…¶è½¬æ¢ä¸ºæ•°å­—ï¼Œå°±ç­‰åŒäº Number() ğŸ‰

```js
let apples = "2";
let oranges = "3";
// both values converted to numbers before the binary plus
alert( +apples + +oranges ); // 5
alert( Number(apples) + Number(oranges) ); // 5
```

##### `,` 

é€—å·è¿ç®—ç¬¦æ˜¯æœ€ç½•è§ã€æœ€ä¸å¸¸è§çš„è¿ç®—ç¬¦ä¹‹ä¸€ã€‚é€—å·æ“ä½œç¬¦å…è®¸æˆ‘ä»¬å¯¹å‡ ä¸ªè¡¨è¾¾å¼æ±‚å€¼ï¼Œç”¨é€—å·åˆ†éš”å®ƒä»¬ã€‚å°†å¯¹å…¶ä¸­çš„æ¯ä¸€ä¸ªè¿›è¡Œè®¡ç®—ï¼Œä½†åªè¿”å›æœ€åä¸€ä¸ªçš„ç»“æœğŸ‘‡

```js
let a = (1 + 2, 3 + 4);
alert( a ); // 7 (the result of 3 + 4)
// ä¸¾ä¸ªä½¿ç”¨åœºæ™¯çš„ ğŸŒ°
for (a = 1, b = 3, c = a * b; a < 10; a++) {
 ...
}
```

### æ•°æ®ç±»å‹

#### Object

...

## `Part3`  Additional articles

### 4 åœ¨æµè§ˆå™¨ä¸­å­˜å‚¨æ•°æ®

#### 4.1 Cookie

>  Cookie æ˜¯ HTTP åè®®çš„ä¸€éƒ¨åˆ†ï¼Œç”± [RFC 6265](https://tools.ietf.org/html/rfc6265) è§„èŒƒå®šä¹‰

##### å¦‚ä½•ç”¨ä½œèº«ä»½éªŒè¯ ğŸŒŸ 

>  æœåŠ¡ç«¯é€šå¸¸ä¼šåˆ©ç”¨ HTTP å“åº”å¤´ä¸­çš„ `Set-Cookie` å­—æ®µå»ç§ cookieï¼Œéšåæµè§ˆå™¨åœ¨åŒåŸŸä¸‹å‘å‡ºè¯·æ±‚æ—¶ä¼šåœ¨è¯·æ±‚å¤´ä¸­çš„ `cookie` å­—æ®µä¸­è‡ªåŠ¨å¸¦ä¸Šï¼ˆæ³¨ï¼šå¦‚æœæ˜¯ fetch è¯·æ±‚éœ€è¦åœ¨ç¬¬äºŒå‚æ•°ä¸­è®¾ç½® `credentials:'include'` æ‰èƒ½åœ¨æ¯ä¸ªè¯·æ±‚ä¸­è‡ªåŠ¨å¸¦ä¸Š cookieï¼‰æœåŠ¡ç«¯ç§ä¸‹çš„ cookieï¼Œé€šå¸¸æœåŠ¡ç«¯ç§ä¸‹çš„æ˜¯ä¸€ä¸ªç”¨æˆ· session æ ‡è¯†ï¼Œç”¨äºåˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·

1. ç™»é™†ä¹‹åï¼ŒæœåŠ¡ç«¯åˆ©ç”¨ `Set-Cookie` HTTP-header å»ç§ä¸€ä¸ªcookieï¼Œé‡Œè¾¹ä¼šåŒ…å«ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ session æ ‡è¯† (session identifier)

   > ä¾‹å¦‚ï¼šCookie: meta_session=YWE5N2IxZGMtYmIxMy00YzZhLWE4ZDgtM2Q1NzJiMDI3MGM0

2. ä¸‹æ¬¡å¦‚æœè¯·æ±‚æ˜¯ç”±ç›¸åŒåŸŸå‘èµ·çš„ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨ `Cookie` HTTP-header é€šè¿‡ç½‘ç»œå‘é€ cookieã€‚

3. æ‰€ä»¥æœåŠ¡ç«¯å°±çŸ¥é“æ˜¯è°å‘èµ·äº†è¯·æ±‚

##### å¤§å°é™åˆ¶

- `encodeURIComponent` ç¼–ç åçš„ `name=value` å¯¹ï¼Œå¤§å°ä¸èƒ½è¶…è¿‡ 4KB

> å°çŸ¥è¯† ğŸ’¡
>
> * ä¸åŒç¼–ç æ–¹å¼å­—ç¬¦æ‰€å çš„å­—èŠ‚æ•°
>
> ASCIIç ï¼š1ä¸ªè‹±æ–‡å­—æ¯ï¼ˆä¸åˆ†å¤§å°å†™ï¼‰å 1ä¸ªå­—èŠ‚ï¼Œ1ä¸ªä¸­æ–‡æ±‰å­—å 2ä¸ªå­—èŠ‚ã€‚
>
> UTF-8ç¼–ç ï¼š1ä¸ªè‹±æ–‡å­—æ¯å 1ä¸ªå­—èŠ‚ï¼Œ1ä¸ªä¸­æ–‡ï¼ˆå«ç¹ä½“ï¼‰å 3ä¸ªå­—èŠ‚ã€‚ä¸­æ–‡æ ‡ç‚¹å 3ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡æ ‡ç‚¹å 1ä¸ªå­—èŠ‚
>
> Unicodeç¼–ç ï¼š1ä¸ªè‹±æ–‡å­—æ¯å 2ä¸ªå­—èŠ‚ï¼Œ1ä¸ªä¸­æ–‡ï¼ˆå«ç¹ä½“ï¼‰å 2ä¸ªå­—èŠ‚ã€‚ä¸­æ–‡æ ‡ç‚¹å 2ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡æ ‡ç‚¹å 1ä¸ªå­—èŠ‚
>
> * å•ä½æ¢ç®—
>
> 1 Byte = 8 bit å­—èŠ‚æ˜¯æ•°æ®å­˜å‚¨çš„åŸºç¡€å•ä½ï¼Œæ¯”ç‰¹æ˜¯ä¿¡æ¯çš„æœ€å°å•ä½
>
> 1 KB=1024 Byte ... 
>
> KB MB GB TB PB EB ZB YB

- æ¯ä¸ªåŸŸçš„ cookie æ€»æ•°ä¸å¾—è¶…è¿‡ 20+ å·¦å³ï¼Œå…·ä½“é™åˆ¶å–å†³äºæµè§ˆå™¨

##### document.cookie

å¯ä»¥å¯¹ cookie è¿›è¡Œè¯»å†™æ“ä½œ

```js
document.cookie = "user=John"; // å†™ï¼šåªä¼šæ›´æ–°åç§°ä¸º user çš„ cookie
alert(document.cookie); // è¯»ï¼šå±•ç¤ºæ‰€æœ‰ cookieï¼Œå¦‚æœè®¾ç½®äº†httpOnlyå±æ€§ï¼Œåˆ™æ­¤æ–¹æ³•å¯èƒ½æ— æ³•è·å– cookie
```

##### é…ç½®é¡¹

```js
// ğŸŒ°
document.cookie = "user=John; path=/; expires=Tue, 19 Jan 2038 03:14:07 GMT; secure; samesite=lax"
```

* path

  > è®¾ç½®å¯ä»¥è®¿é—®è¯¥ cookie çš„è·¯å¾„ã€‚å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼Œé»˜è®¤ä¸ºå½“å‰è·¯å¾„ã€‚é€šå¸¸æˆ‘ä»¬åº”è¯¥å°† `path` è®¾ç½®ä¸ºæ ¹ç›®å½•ï¼š`path=/`ï¼Œä»¥ä½¿ cookie å¯¹æ­¤ç½‘ç«™çš„æ‰€æœ‰é¡µé¢å¯è§

* domain

  > è®¾ç½®å¯ä»¥è®¿é—®è¯¥  cookie çš„åŸŸ

  ```js
  // âš ï¸æ³¨æ„ï¼šå¦‚æœä¸è®¾ç½®domainå‚æ•°ï¼Œä¸€çº§åŸŸåç›¸åŒï¼ŒäºŒçº§åŸŸåä¸åŒä¹Ÿå±äºä¸åŒåŸŸï¼Œæ•…æ— æ³•è®¿é—®cookieï¼Œ
  // è§£å†³æ–¹å¼å°±æ˜¯å°†domainè®¾ç½®ä¸ºåŒä¸€ä¸ªä¸€çº§åŸŸå
  // åœ¨ site.com
  document.cookie = "user=John"
  // åœ¨ forum.site.com
  alert(document.cookie); // æ²¡æœ‰ user
  ```

* expiresã€max-age

  > è®¾ç½® cookie çš„æœ‰æ•ˆæœŸã€‚
  >
  > é»˜è®¤æƒ…å†µä¸‹ï¼Œ cookie æ²¡æœ‰è®¾ç½®è¿™ä¸¤ä¸ªå‚æ•°ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œé‚£ä¹ˆåœ¨å…³é—­æµè§ˆå™¨ä¹‹å cookie å°±ä¼šæ¶ˆå¤±

  ```js
  expires = "Tue, 19 Jan 2038 03:14:07 GMT" //æ—¥æœŸå¿…é¡»å®Œå…¨é‡‡ç”¨ GMT æ—¶åŒºçš„æ ¼å¼
  max-age = 3600 // è¿‡æœŸæ—¶é—´è·ç¦»å½“å‰æ—¶é—´çš„ç§’æ•°
  ```

* secure

  > è®¾ç½® cookie åªèƒ½è¢«é€šè¿‡ HTTPS ä¼ è¾“
  >
  > cookie æ˜¯åŸºäºåŸŸçš„ï¼Œä¸åŒºåˆ†åè®®ï¼š**é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ `http://site.com` ä¸Šè®¾ç½®äº† cookieï¼Œé‚£ä¹ˆè¯¥ cookie ä¹Ÿä¼šå‡ºç°åœ¨ `https://site.com` ä¸Š**

* samesite

  > é˜²æ­¢ XSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰æ”»å‡»

* httpOnly

  > è®¾ç½®ç¦æ­¢ä»»ä½• JavaScript è®¿é—® cookieã€‚æœåŠ¡ç«¯åœ¨å“åº”å¤´ä¸­çš„ Set-Cookie å¯ä»¥è¿›è¡Œè®¾ç½®ï¼Œå‰ç«¯ä½¿ç”¨ `document.cookie` çœ‹ä¸åˆ°æ­¤ç±» cookieï¼Œä¹Ÿæ— æ³•å¯¹æ­¤ç±» cookie è¿›è¡Œæ“ä½œ